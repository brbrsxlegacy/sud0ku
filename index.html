<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Random Neon Sudoku</title>

<style>
* { box-sizing: border-box; }

body {
  margin: 0;
  height: 100vh;
  font-family: "Segoe UI", sans-serif;
  background: radial-gradient(circle at top, #1e1e2f, #05050c);
  display: flex;
  justify-content: center;
  align-items: center;
  color: #fff;
}

.container {
  background: rgba(255,255,255,0.06);
  padding: 30px;
  border-radius: 20px;
  box-shadow: 0 0 40px rgba(0,255,255,0.25);
  backdrop-filter: blur(12px);
  text-align: center;
}

h2 {
  letter-spacing: 3px;
  text-shadow: 0 0 12px cyan;
}

table {
  border-collapse: collapse;
  margin: 20px auto;
}

td {
  border: 1px solid rgba(0,255,255,0.25);
}

input {
  width: 48px;
  height: 48px;
  font-size: 20px;
  text-align: center;
  background: transparent;
  color: cyan;
  border: none;
  outline: none;
}

input:focus {
  box-shadow: inset 0 0 12px cyan;
}

tr:nth-child(3n) td { border-bottom: 2px solid cyan; }
td:nth-child(3n) { border-right: 2px solid cyan; }
tr:first-child td { border-top: 2px solid cyan; }
td:first-child { border-left: 2px solid cyan; }

.fixed {
  color: #fff;
  background: rgba(255,255,255,0.15);
}

.error {
  background: rgba(255,60,60,0.35);
  box-shadow: inset 0 0 12px red;
}

button {
  background: linear-gradient(135deg, #00f5ff, #0066ff);
  border: none;
  color: #fff;
  padding: 10px 20px;
  margin: 5px;
  border-radius: 25px;
  cursor: pointer;
  box-shadow: 0 0 20px rgba(0,245,255,0.7);
}
</style>
</head>

<body>
<div class="container">
  <h2>RANDOM SUDOKU</h2>
  <table id="sudoku"></table>
  <button onclick="newGame()">Yeni Oyun</button>
</div>

<script>
const table = document.getElementById("sudoku");

// ---------------- SUDOKU ÃœRETÄ°CÄ° ----------------

function generateSolvedBoard() {
  const board = Array.from({ length: 9 }, () => Array(9).fill(0));
  solve(board);
  return board;
}

function solve(board) {
  for (let row = 0; row < 9; row++) {
    for (let col = 0; col < 9; col++) {
      if (board[row][col] === 0) {
        const nums = shuffle([1,2,3,4,5,6,7,8,9]);
        for (let num of nums) {
          if (isValid(board, row, col, num)) {
            board[row][col] = num;
            if (solve(board)) return true;
            board[row][col] = 0;
          }
        }
        return false;
      }
    }
  }
  return true;
}

function isValid(board, r, c, n) {
  for (let i = 0; i < 9; i++) {
    if (board[r][i] === n || board[i][c] === n) return false;
  }
  const sr = Math.floor(r / 3) * 3;
  const sc = Math.floor(c / 3) * 3;
  for (let i = sr; i < sr + 3; i++) {
    for (let j = sc; j < sc + 3; j++) {
      if (board[i][j] === n) return false;
    }
  }
  return true;
}

function shuffle(arr) {
  return arr.sort(() => Math.random() - 0.5);
}

function removeNumbers(board, difficulty = 45) {
  const puzzle = board.map(r => r.slice());
  let removed = 0;
  while (removed < difficulty) {
    const r = Math.floor(Math.random() * 9);
    const c = Math.floor(Math.random() * 9);
    if (puzzle[r][c] !== 0) {
      puzzle[r][c] = 0;
      removed++;
    }
  }
  return puzzle;
}

// ---------------- BOARD Ã‡Ä°ZÄ°M ----------------

function createBoard(puzzle) {
  table.innerHTML = "";
  for (let i = 0; i < 9; i++) {
    const tr = document.createElement("tr");
    for (let j = 0; j < 9; j++) {
      const td = document.createElement("td");
      const input = document.createElement("input");
      input.maxLength = 1;

      if (puzzle[i][j] !== 0) {
        input.value = puzzle[i][j];
        input.disabled = true;
        input.classList.add("fixed");
      }

      input.oninput = () => {
  input.value = input.value.replace(/[^1-9]/g, "");
  checkCell(i, j, input);
  checkGameStatus(); // ðŸ‘ˆ BU SATIR
};

      td.appendChild(input);
      tr.appendChild(td);
    }
    table.appendChild(tr);
  }
}

function checkCell(row, col, input) {
  input.classList.remove("error");
  const val = input.value;
  if (!val) return;

  const rows = document.querySelectorAll("tr");

  for (let j = 0; j < 9; j++)
    if (j !== col && rows[row].children[j].firstChild.value === val)
      return input.classList.add("error");

  for (let i = 0; i < 9; i++)
    if (i !== row && rows[i].children[col].firstChild.value === val)
      return input.classList.add("error");

  const sr = Math.floor(row / 3) * 3;
  const sc = Math.floor(col / 3) * 3;

  for (let i = sr; i < sr + 3; i++)
    for (let j = sc; j < sc + 3; j++)
      if ((i !== row || j !== col) &&
          rows[i].children[j].firstChild.value === val)
        return input.classList.add("error");
}

// ---------------- YENÄ° OYUN ----------------

function newGame() {
  const solved = generateSolvedBoard();
  const puzzle = removeNumbers(solved, 45); // sayÄ± â†‘ zorlaÅŸÄ±r
  createBoard(puzzle);
}

function checkGameStatus() {
  const inputs = document.querySelectorAll("input");

  for (let input of inputs) {
    if (input.value === "") return;
  }

  for (let input of inputs) {
    if (input.classList.contains("error")) {
      setTimeout(() => {
        alert("âŒ BazÄ± yerler yanlÄ±ÅŸ knk");
      }, 100);
      return;
    }
  }

  setTimeout(() => {
    alert("ðŸŽ‰ HELAL! Sudoku bitti");
  }, 100);
}

newGame();
</script>
</body>
</html>


